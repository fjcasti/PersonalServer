CREATE TABLE PUBLIC.IDENTITY(
	OBJECTKEY UUID NOT NULL,
	NICK  VARCHAR(200) NOT NULL,
	PUBLICKEY VARCHAR(1000) NOT NULL,
	PRIMARY KEY (OBJECTKEY)
);

CREATE TABLE PUBLIC.LOGIN(
	OBJECTKEY UUID NOT NULL,
	IDENTITYKEY UUID NOT NULL,
	LOGINNAME VARCHAR(200) NOT NULL,
	PASSWORD VARCHAR(200) NOT NULL,
	PRIMARY KEY (OBJECTKEY)
);

CREATE TABLE PUBLIC.CIRCLE(
	OBJECTKEY UUID NOT NULL,
	IDENTITYKEY UUID NOT NULL,
	NAME VARCHAR(200),
	PRIMARY KEY (OBJECTKEY)
);

CREATE TABLE PUBLIC.OBJECTHISTORY
(
OBJECTKEY UUID NOT NULL,
OBJECTTYPE VARCHAR(25) NOT NULL,
CREATED TIMESTAMP NOT NULL,
LASTMODIFIED TIMESTAMP,
LASTSHOWN TIMESTAMP,
DESCRIPTION VARCHAR(2000),
HTMLSRC CLOB,
TEXTCONTENT VARCHAR(64000),
VERSION INT NOT NULL,
PRIMARY KEY (OBJECTKEY,VERSION)
);

ALTER TABLE PUBLIC.OBJECTLIST ADD VERSION INT NOT NULL DEFAULT 0;

ALTER TABLE PUBLIC.FILEDATA ALTER COLUMN MIMETYPE VARCHAR(400);

--inserts por defecto y sus relaciones
insert into objectlist values (00000000-0000-0000-0000-000000000001,'tag',TODAY,TODAY,TODAY,'system',null,'system',0);
insert into objectlist values (00000000-0000-0000-0000-000000000002,'tag',TODAY,TODAY,TODAY,'PUBLIC',null,'PUBLIC',0);
insert into link values(00000000-0000-0000-0001-000000000000,00000000-0000-0000-0000-000000000001,00000000-0000-0000-0000-000000000002,'tag',TODAY,0);
insert into objectlist values (00000000-0000-0000-0000-000000000003,'tag',TODAY,TODAY,TODAY,'BOOKMARK',null,'BOOKMARK',0);
insert into link values(00000000-0000-0000-0002-000000000000,00000000-0000-0000-0000-000000000001,00000000-0000-0000-0000-000000000003,'tag',TODAY,0);
insert into objectlist values (00000000-0000-0000-0000-000000000004,'tag',TODAY,TODAY,TODAY,'PUBLIC_EDITABLE',null,'PUBLIC_EDITABLE',0);
insert into link values(00000000-0000-0000-0003-000000000000,00000000-0000-0000-0000-000000000001,00000000-0000-0000-0000-000000000004,'tag',TODAY,0);


